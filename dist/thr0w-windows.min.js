!function(){"use strict";function t(t,e){function n(){var t,e=[];for(t=0;t<c.length;t++){var n=c[t];e.push({id:n.getId(),x:n.getX(),y:n.getY(),width:n.getWidth(),height:n.getHeight(),src:n.getSrc()})}return e}function o(t){function e(t){return t.id}var n,o,i,r=t.map(e),s=c.map(d),h=[];for(n=0;n<c.length;n++)i=c[n],-1===r.indexOf(i.getId())&&(c.splice(n,1),i.destroy());for(n=0;n<t.length;n++)-1===s.indexOf(t[n].id)&&c.push(new w(t[n].id,t[n].x,t[n].y,t[n].width,t[n].height,t[n].src));for(n=0;n<r.length;n++)for(o=0;o<c.length;o++)if(i=c[o],i.getId()===r[n]){i.deactivate(),h.push(i),c.splice(o,1);break}c=h,l()}function i(t){var e,n,o;for(e=0;e<c.length;e++)c[e].deactivate(),c[e].getId()===t&&(n=e,o=c[e]);c.splice(n,1),c.push(o),l(),a.update(),a.idle()}function r(t,n,o,i,r,s){if(c.length>99)throw 400;if(-1!==c.map(d).indexOf(t))throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===n||"number"!=typeof n||0>n)throw 400;if(void 0===o||"number"!=typeof o||0>o)throw 400;if(void 0===i||"number"!=typeof i||140>i)throw 400;if(void 0===r||"number"!=typeof r||55>r)throw 400;if(void 0===s||"string"!=typeof s)throw 400;if(n+i>e.getWidth())throw 400;if(o+r>e.getHeight())throw 400;var h;for(h=0;h<c.length;h++)c[h].deactivate();c.push(new w(t,n,o,i,r,s)),l(),a.update(),a.idle()}function s(e){if(void 0===e||"string"!=typeof e)throw 400;var n=c.map(d).indexOf(e);if(-1===n)throw 400;var o=c[n];c.splice(n,1),o.destroy(),l(),a.update(),a.idle(),document.dispatchEvent(new CustomEvent("thr0w_windows_close_window",{detail:{wmid:t,id:e}}))}function d(t){return t.getId()}function l(){var t;for(t=0;t<c.length;t++)c[t].setZ(800+t);t=c.length-1,-1!==t&&c[t].activate()}function w(t,n,o,r,d,l){function w(){return{x:n,y:o,scrollX:A,scrollY:B}}function c(t){n=t.x,o=t.y,A=t.scrollX,B=t.scrollY,S(n,o,A,B)}function a(e){e.preventDefault(),i(t)}function u(t){t.preventDefault(),Z=!0,"mousedown"===t.type?(X=t.pageX-D,Y=t.pageY-z):(X=Math.floor(t.changedTouches[0].pageX)-D,Y=Math.floor(t.changedTouches[0].pageY)-z),N.update()}function f(t){if(Z){var i,s;"mousemove"===t.type?(i=t.pageX-D,s=t.pageY-z):(i=Math.floor(t.changedTouches[0].pageX)-D,s=Math.floor(t.changedTouches[0].pageY)-z),n=Math.min(n+i-X,e.getWidth()-r),n=Math.max(n,0),o=Math.min(o+s-Y,e.getHeight()-d),o=Math.max(o,0),S(n,o,A,B),X=i,Y=s,N.update()}}function v(){Z=!1,N.idle()}function _(e){e.preventDefault(),s(t)}function g(){j.removeEventListener("load",g),j.contentWindow.document.addEventListener("scroll",M)}function p(){return t}function m(){return n}function y(){return o}function L(){return r}function b(){return d}function E(){return l}function x(t){K.style.zIndex=t}function k(){F||(F=!0,C.style.visibility="hidden",q.style.visibility="visible")}function W(){F&&(F=!1,q.style.visibility="hidden",C.style.visibility="visible")}function T(){K.removeEventListener("mousedown",a),K.removeEventListener("touchstart",a),I.removeEventListener("mousedown",u),I.removeEventListener("touchstart",u),I.removeEventListener("mousemove",f),I.removeEventListener("touchmove",f),I.removeEventListener("mouseup",v),I.removeEventListener("mouseleave",v),I.removeEventListener("touchend",v),I.removeEventListener("touchcancel",v),H.removeEventListener("mousedown",_),H.removeEventListener("touchstart",_),j.contentWindow.location.href="about:blank",h.removeChild(K),N.destroy()}function M(){function t(){J?(G=!1,N.idle()):(J=!0,window.setTimeout(t,100))}G||(window.setTimeout(t,100),G=!0),J=!1,A=j.contentWindow.document.body.scrollTop,B=j.contentWindow.document.body.scrollLeft,N.update()}function S(t,e,n,o){function i(){K.style.left=t+"px",K.style.top=e+"px",j.contentWindow.document.body.scrollTop=n,j.contentWindow.document.body.scrollLeft=o}window.requestAnimationFrame(i)}var X,Y,I,q,H,j,C,O=e.getFrame(),D=O.offsetLeft+h.offsetLeft,z=O.offsetTop+h.offsetTop,F=!0,Z=!1,A=0,B=0,G=!1,J=!0,K=document.createElement("div"),N=new window.thr0w.Sync(e,"thr0w_windows_"+h.id+"_"+t,w,c);K.id=t,K.style.left=n+"px",K.style.top=o+"px",K.style.width=r+"px",K.style.height=d+"px",K.classList.add("thr0w_windows_window"),K.innerHTML=['<div class="thr0w_windows_window__bar">','<div class="thr0w_windows_window__bar__controls">','<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewbox="0 0 100 100" class="thr0w_windows_window__bar__controls__control thr0w_windows_window__bar__controls__control--close">',"<g>",'<ellipse stroke="#000000" ry="49" rx="49" id="svg_1" cy="50" cx="50" stroke-width="2" fill="#ffffff"/>','<path id="svg_4" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>','<path id="svg_6" d="m13.75,30.5l18.5,18.75l-19.5,20.25l17.25,16.75l20.5,-19l19.25,19.5l17.25,-17l-19.5,-19.25l19.75,-19.75l-17.5,-17.5l-19.25,20l-19.5,-20l-17.25,17.25z" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>',"</g>","</svg>","</div>","</div>",'<iframe src="'+l+'" width="'+(r-2)+'" height="'+(d-52)+'" frameborder="0" class="thr0w_windows_window__content">',"</iframe>",'<div style="width: '+(r-2)+"px; height: "+(d-52)+'px;" class="thr0w_windows_window__cover"></div>'].join("\n"),K.addEventListener("mousedown",a),K.addEventListener("touchstart",a),I=K.querySelector(".thr0w_windows_window__bar"),I.addEventListener("mousedown",u),I.addEventListener("touchstart",u),I.addEventListener("mousemove",f),I.addEventListener("touchmove",f),I.addEventListener("mouseup",v),I.addEventListener("mouseleave",v),I.addEventListener("touchend",v),I.addEventListener("touchcancel",v),q=K.querySelector(".thr0w_windows_window__bar__controls"),q.style.visibility="visible",H=q.querySelector(".thr0w_windows_window__bar__controls__control--close"),H.addEventListener("mousedown",_),H.addEventListener("touchstart",_),j=K.querySelector(".thr0w_windows_window__content"),j.addEventListener("load",g),C=K.querySelector(".thr0w_windows_window__cover"),C.style.visibility="hidden",h.appendChild(K),this.getId=p,this.getX=m,this.getY=y,this.getWidth=L,this.getHeight=b,this.getSrc=E,this.activate=k,this.deactivate=W,this.destroy=T,this.setZ=x}if(void 0===t||"string"!=typeof t)throw 400;if(!e||"object"!=typeof e)throw 400;var c=[],h=e.getContent(),a=new window.thr0w.Sync(e,"thr0w_windows_"+h.id,n,o);this.openWindow=r,this.closeWindow=s}if(void 0===window.thr0w)throw 400;var e={};e.WindowManager=t,window.thr0w.windows=e}();