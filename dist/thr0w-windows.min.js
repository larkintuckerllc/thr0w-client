!function(){"use strict";function e(e,t){function n(){var e,t=[];for(e=0;e<v.length;e++){var n=v[e];t.push({id:n.getId(),x:n.getX(),y:n.getY(),width:n.getWidth(),height:n.getHeight(),src:n.getSrc()})}return t}function o(e){function t(e){return e.id}var n,o,i,r,s=e.map(t),d=v.map(l),c=[];for(n=0;n<v.length;n++)r=v[n],o=r.getId(),-1===s.indexOf(o)&&(v.splice(n,1),r.destroy(),a(o));for(n=0;n<e.length;n++)-1===d.indexOf(e[n].id)&&v.push(new h(e[n].id,e[n].x,e[n].y,e[n].width,e[n].height,e[n].src));for(n=0;n<s.length;n++)for(i=0;i<v.length;i++)if(r=v[i],r.getId()===s[n]){r.deactivate(),c.push(r),v.splice(i,1);break}v=c,w()}function i(e,n,o,i,r,s){if(v.length>99)throw 400;if(-1!==v.map(l).indexOf(e))throw 400;if(void 0===e||"string"!=typeof e)throw 400;if(void 0===n||"number"!=typeof n||0>n)throw 400;if(void 0===o||"number"!=typeof o||0>o)throw 400;if(void 0===i||"number"!=typeof i||140>i)throw 400;if(void 0===r||"number"!=typeof r||55>r)throw 400;if(void 0===s||"string"!=typeof s)throw 400;if(n+i>t.getWidth())throw 400;if(o+r>t.getHeight())throw 400;var d;for(d=0;d<v.length;d++)v[d].deactivate();v.push(new h(e,n,o,i,r,s)),w(),f.update(),f.idle()}function r(e){if(void 0===e||"string"!=typeof e)throw 400;var t=v.map(l).indexOf(e);if(-1===t)throw 400;var n=v[t];v.splice(t,1),n.destroy(),w(),f.update(),f.idle(),a(e)}function s(){var e;for(e=v.length-1;e>=0;e--)r(v[e].getId())}function d(e,t){document.addEventListener("thr0w_windows_"+e,t)}function c(e,t){document.removeEventListener("thr0w_windows_"+e,t)}function l(e){return e.getId()}function w(){var e;for(e=0;e<v.length;e++)v[e].setZ(800+e);e=v.length-1,-1!==e&&v[e].activate()}function a(t){document.dispatchEvent(new CustomEvent("thr0w_windows_window_closed",{detail:{wmid:e,id:t}}))}function h(e,n,o,i,s,d){function c(){return{x:n,y:o,scrollX:G,scrollY:J}}function l(e){n=e.x,o=e.y,G=e.scrollX,J=e.scrollY,Y(n,o,G,J)}function a(){if(!B){var t,n,o;for(t=0;t<v.length;t++)v[t].deactivate(),v[t].getId()===e&&(n=t,o=v[t]);v.splice(n,1),v.push(o),w(),f.update(),f.idle()}}function h(e){D=!0,"mousedown"===e.type?(q=e.pageX-Z,H=e.pageY-P):(q=Math.floor(e.changedTouches[0].pageX)-Z,H=Math.floor(e.changedTouches[0].pageY)-P),R.update()}function m(e){if(D){var r,d;"mousemove"===e.type?(r=e.pageX-Z,d=e.pageY-P):(r=Math.floor(e.changedTouches[0].pageX)-Z,d=Math.floor(e.changedTouches[0].pageY)-P),n=Math.min(n+r-q,t.getWidth()-i),n=Math.max(n,0),o=Math.min(o+d-H,t.getHeight()-s),o=Math.max(o,0),Y(n,o,G,J),q=r,H=d,R.update()}}function _(){D=!1,R.idle()}function g(e){e.stopPropagation()}function p(){r(e)}function y(){z.removeEventListener("load",y),z.contentWindow.document.addEventListener("scroll",X)}function L(){return e}function E(){return n}function b(){return o}function x(){return i}function k(){return s}function W(){return d}function T(e){Q.style.zIndex=e}function M(){B||(B=!0,A.style.visibility="hidden",C.style.visibility="visible")}function S(){B&&(B=!1,C.style.visibility="hidden",A.style.visibility="visible")}function I(){Q.removeEventListener("mousedown",a),Q.removeEventListener("touchstart",a),j.removeEventListener("mousedown",h),j.removeEventListener("touchstart",h),j.removeEventListener("mousemove",m),j.removeEventListener("touchmove",m),j.removeEventListener("mouseup",_),j.removeEventListener("mouseleave",_),j.removeEventListener("touchend",_),j.removeEventListener("touchcancel",_),O.removeEventListener("mousedown",g),O.removeEventListener("touchstart",g),O.removeEventListener("mousemove",g),O.removeEventListener("touchmove",g),O.removeEventListener("mouseup",g),O.removeEventListener("mouseleave",g),O.removeEventListener("touchend",g),O.removeEventListener("touchcancel",g),O.removeEventListener("click",p),z.contentWindow.location.href="about:blank",u.removeChild(Q),R.destroy()}function X(){function e(){N?(K=!1,R.idle()):(N=!0,window.setTimeout(e,100))}K||(window.setTimeout(e,100),K=!0),N=!1,G=z.contentWindow.document.body.scrollTop,J=z.contentWindow.document.body.scrollLeft,R.update()}function Y(e,t,n,o){function i(){Q.style.left=e+"px",Q.style.top=t+"px",z.contentWindow.document.body.scrollTop=n,z.contentWindow.document.body.scrollLeft=o}window.requestAnimationFrame(i)}var q,H,j,C,O,z,A,F=t.getFrame(),Z=F.offsetLeft+u.offsetLeft,P=F.offsetTop+u.offsetTop,B=!0,D=!1,G=0,J=0,K=!1,N=!0,Q=document.createElement("div"),R=new window.thr0w.Sync(t,"thr0w_windows_"+u.id+"_"+e,c,l);Q.id=e,Q.style.left=n+"px",Q.style.top=o+"px",Q.style.width=i+"px",Q.style.height=s+"px",Q.classList.add("thr0w_windows_window"),Q.innerHTML=['<div class="thr0w_windows_window__bar">','<div class="thr0w_windows_window__bar__controls">','<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewbox="0 0 100 100" class="thr0w_windows_window__bar__controls__control thr0w_windows_window__bar__controls__control--close">',"<g>",'<ellipse stroke="#000000" ry="49" rx="49" id="svg_1" cy="50" cx="50" stroke-width="2" fill="#ffffff"/>','<path id="svg_4" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>','<path id="svg_6" d="m13.75,30.5l18.5,18.75l-19.5,20.25l17.25,16.75l20.5,-19l19.25,19.5l17.25,-17l-19.5,-19.25l19.75,-19.75l-17.5,-17.5l-19.25,20l-19.5,-20l-17.25,17.25z" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>',"</g>","</svg>","</div>","</div>",'<iframe src="'+d+'" width="'+(i-2)+'" height="'+(s-52)+'" frameborder="0" class="thr0w_windows_window__content">',"</iframe>",'<div style="width: '+(i-2)+"px; height: "+(s-52)+'px;" class="thr0w_windows_window__cover"></div>'].join("\n"),Q.addEventListener("mousedown",a),Q.addEventListener("touchstart",a),j=Q.querySelector(".thr0w_windows_window__bar"),j.addEventListener("mousedown",h),j.addEventListener("touchstart",h),j.addEventListener("mousemove",m),j.addEventListener("touchmove",m),j.addEventListener("mouseup",_),j.addEventListener("mouseleave",_),j.addEventListener("touchend",_),j.addEventListener("touchcancel",_),C=Q.querySelector(".thr0w_windows_window__bar__controls"),C.style.visibility="visible",O=C.querySelector(".thr0w_windows_window__bar__controls__control--close"),O.addEventListener("mousedown",g),O.addEventListener("touchstart",g),O.addEventListener("mousemove",g),O.addEventListener("touchmove",g),O.addEventListener("mouseup",g),O.addEventListener("mouseleave",g),O.addEventListener("touchend",g),O.addEventListener("touchcancel",g),O.addEventListener("click",p),z=Q.querySelector(".thr0w_windows_window__content"),z.addEventListener("load",y),A=Q.querySelector(".thr0w_windows_window__cover"),A.style.visibility="hidden",u.appendChild(Q),this.getId=L,this.getX=E,this.getY=b,this.getWidth=x,this.getHeight=k,this.getSrc=W,this.activate=M,this.deactivate=S,this.destroy=I,this.setZ=T}if(void 0===e||"string"!=typeof e)throw 400;if(!t||"object"!=typeof t)throw 400;var v=[],u=t.getContent(),f=new window.thr0w.Sync(t,"thr0w_windows_"+u.id,n,o);this.openWindow=i,this.closeWindow=r,this.closeAllWindows=s,this.addEventListener=d,this.removeEventListener=c}if(void 0===window.thr0w)throw 400;var t={};t.WindowManager=e,window.thr0w.windows=t}();