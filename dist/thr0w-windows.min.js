!function(){"use strict";function t(t,n){function o(){var t,e=[];for(t=0;t<a.length;t++){var i=a[t];e.push({id:i.getId(),x:i.getX(),y:i.getY(),width:i.getWidth(),height:i.getHeight(),src:i.getSrc()})}return e}function r(t){function e(t){return t.id}var i,n,o,r=t.map(e),d=a.map(l),s=[];for(i=0;i<a.length;i++)o=a[i],-1===r.indexOf(o.getId())&&(a.splice(i,1),o.destroy());for(i=0;i<t.length;i++)-1===d.indexOf(t[i].id)&&a.push(new h(t[i].id,t[i].x,t[i].y,t[i].width,t[i].height,t[i].src));for(i=0;i<r.length;i++)for(n=0;n<a.length;n++)if(o=a[n],o.getId()===r[i]){o.deactivate(),s.push(o),a.splice(n,1);break}a=s,w()}function d(t){var e,i,n;for(e=0;e<a.length;e++)a[e].deactivate(),a[e].getId()===t&&(i=e,n=a[e]);a.splice(i,1),a.push(n),w(),f.update(),f.idle()}function s(t,i,o,r,d,s){if(a.length>99)throw 400;if(-1!==a.map(l).indexOf(t))throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===i||"number"!=typeof i||0>i)throw 400;if(void 0===o||"number"!=typeof o||e>o)throw 400;if(void 0===r||"number"!=typeof r||140>r)throw 400;if(void 0===d||"number"!=typeof d)throw 400;if(void 0===s||"string"!=typeof s)throw 400;if(i+r>n.getWidth())throw 400;if(o+d+e>n.getHeight())throw 400;var c;for(c=0;c<a.length;c++)a[c].deactivate();a.push(new h(t,i,o-e,r,d+e,s)),w(),f.update(),f.idle()}function c(e){if(void 0===e||"string"!=typeof e)throw 400;var i=a.map(l).indexOf(e);if(-1===i)throw 400;var n=a[i];a.splice(i,1),n.destroy(),w(),f.update(),f.idle(),document.dispatchEvent(new CustomEvent("thr0w_windows_close_window",{detail:{wm_id:t,id:e}}))}function l(t){return t.getId()}function w(){var t;for(t=0;t<a.length;t++)a[t].setZ(i+t);t=a.length-1,-1!==t&&a[t].activate()}function h(t,i,o,r,s,l){function w(){return{x:i,y:o,scrollX:Z,scrollY:A}}function h(t){i=t.x,o=t.y,Z=t.scrollX,A=t.scrollY,F.style.left=i+"px",F.style.top=o+"px",j.contentWindow.document.body.scrollTop=Z,j.contentWindow.document.body.scrollLeft=A}function a(){d(t)}function f(t){z=!0,X=t.pageX,Y=t.pageY,G.update()}function v(t){if(z){var e=t.pageX,d=t.pageY;i=Math.min(i+e-X,n.getWidth()-r),i=Math.max(i,0),o=Math.min(o+d-Y,n.getHeight()-s),o=Math.max(o,0),F.style.left=i+"px",F.style.top=o+"px",X=e,Y=d,G.update()}}function _(){z=!1,G.idle()}function p(){c(t)}function g(){j.removeEventListener("load",g),j.contentWindow.document.addEventListener("scroll",M)}function y(){return t}function m(){return i}function b(){return o}function x(){return r}function L(){return s}function E(){return l}function k(t){F.style.zIndex=t}function W(){O||(O=!0,C.style.visibility="hidden",H.style.visibility="visible")}function S(){O&&(O=!1,H.style.visibility="hidden",C.style.visibility="visible")}function I(){F.removeEventListener("mousedown",a),q.removeEventListener("mousedown",f),q.removeEventListener("mousemove",v),q.removeEventListener("mouseup",_),q.removeEventListener("mouseleave",_),T.removeEventListener("click",p),j.contentWindow.location.href="about:blank",u.removeChild(F),G.destroy()}function M(){function t(){D?(B=!1,G.idle()):(D=!0,window.setTimeout(t,1e3))}B||(window.setTimeout(t,1e3),B=!0),D=!1,Z=j.contentWindow.document.body.scrollTop,A=j.contentWindow.document.body.scrollLeft,G.update()}var X,Y,q,H,T,j,C,O=!0,z=!1,Z=0,A=0,B=!1,D=!0,F=document.createElement("div"),G=new window.thr0w.Sync(n,"thr0w_windows_"+u.id+"_"+t,w,h);F.id=t,F.style.left=i+"px",F.style.top=o+"px",F.style.width=+r+"px",F.style.height=s+"px",F.classList.add("thr0w_windows_window"),F.innerHTML=['<div class="thr0w_windows_window__bar">','<div class="thr0w_windows_window__bar__controls">','<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewbox="0 0 100 100" class="thr0w_windows_window__bar__controls__control thr0w_windows_window__bar__controls__control--close">',"<g>",'<ellipse stroke="#cccccc" ry="49" rx="49" id="svg_1" cy="50" cx="50" stroke-width="2" fill="#ffffff"/>','<path id="svg_4" fill-opacity="0.5" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#cccccc" fill="#cccccc"/>','<path id="svg_6" d="m13.75,30.5l18.5,18.75l-19.5,20.25l17.25,16.75l20.5,-19l19.25,19.5l17.25,-17l-19.5,-19.25l19.75,-19.75l-17.5,-17.5l-19.25,20l-19.5,-20l-17.25,17.25z" fill-opacity="0.5" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#cccccc" fill="#cccccc"/>',"</g>","</svg>","</div>","</div>",'<iframe src="'+l+'" width="'+r+'" height="'+(s-e)+'" frameborder="0" class="thr0w_windows_window__content">',"</iframe>",'<div style="width: '+r+"px; height: "+(s-e)+'px;" class="thr0w_windows_window__cover"></div>'].join("\n"),F.addEventListener("mousedown",a),q=F.querySelector(".thr0w_windows_window__bar"),q.addEventListener("mousedown",f),q.addEventListener("mousemove",v),q.addEventListener("mouseup",_),q.addEventListener("mouseleave",_),H=F.querySelector(".thr0w_windows_window__bar__controls"),H.style.visibility="visible",T=H.querySelector(".thr0w_windows_window__bar__controls__control--close"),T.addEventListener("click",p),j=F.querySelector(".thr0w_windows_window__content"),j.addEventListener("load",g),C=F.querySelector(".thr0w_windows_window__cover"),C.style.visibility="hidden",u.appendChild(F),this.getId=y,this.getX=m,this.getY=b,this.getWidth=x,this.getHeight=L,this.getSrc=E,this.activate=W,this.deactivate=S,this.destroy=I,this.setZ=k}if(void 0===t||"string"!=typeof t)throw 400;if(!n||"object"!=typeof n)throw 400;var a=[],u=n.getContent(),f=new window.thr0w.Sync(n,"thr0w_windows_"+u.id,o,r);this.openWindow=s,this.closeWindow=c}var e=50,i=800;if(void 0===window.thr0w)throw 400;var n={};n.WindowManager=t,window.thr0w.windows=n}();