!function(){"use strict";function t(t,o){function i(){var t,e=[];for(t=0;t<h.length;t++){var n=h[t];e.push({id:n.getId(),x:n.getX(),y:n.getY(),width:n.getWidth(),height:n.getHeight(),src:n.getSrc()})}return e}function r(t){function e(t){return t.id}var n,o,i,r=t.map(e),s=h.map(w),d=[];for(n=0;n<h.length;n++)i=h[n],-1===r.indexOf(i.getId())&&(h.splice(n,1),i.destroy());for(n=0;n<t.length;n++)-1===s.indexOf(t[n].id)&&h.push(new a(t[n].id,t[n].x,t[n].y,t[n].width,t[n].height,t[n].src));for(n=0;n<r.length;n++)for(o=0;o<h.length;o++)if(i=h[o],i.getId()===r[n]){i.deactivate(),d.push(i),h.splice(o,1);break}h=d,c()}function s(t){var e,n,o;for(e=0;e<h.length;e++)h[e].deactivate(),h[e].getId()===t&&(n=e,o=h[e]);h.splice(n,1),h.push(o),c(),v.update(),v.idle()}function d(t,n,i,r,s,d){if(h.length>99)throw 400;if(-1!==h.map(w).indexOf(t))throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===n||"number"!=typeof n||0>n)throw 400;if(void 0===i||"number"!=typeof i)throw 400;if(void 0===r||"number"!=typeof r||140>r)throw 400;if(void 0===s||"number"!=typeof s||e>s)throw 400;if(void 0===d||"string"!=typeof d)throw 400;if(n+r>o.getWidth())throw 400;if(i+s+e>o.getHeight())throw 400;var l;for(l=0;l<h.length;l++)h[l].deactivate();h.push(new a(t,n,i-e,r,s+e,d)),c(),v.update(),v.idle()}function l(e){if(void 0===e||"string"!=typeof e)throw 400;var n=h.map(w).indexOf(e);if(-1===n)throw 400;var o=h[n];h.splice(n,1),o.destroy(),c(),v.update(),v.idle(),document.dispatchEvent(new CustomEvent("thr0w_windows_close_window",{detail:{wmid:t,id:e}}))}function w(t){return t.getId()}function c(){var t;for(t=0;t<h.length;t++)h[t].setZ(n+t);t=h.length-1,-1!==t&&h[t].activate()}function a(t,n,i,r,d,w){function c(){return{x:n,y:i,scrollX:B,scrollY:G}}function a(t){n=t.x,i=t.y,B=t.scrollX,G=t.scrollY,X(n,i,B,G)}function h(e){e.preventDefault(),s(t)}function v(t){t.preventDefault(),A=!0,"mousedown"===t.type?(Y=t.pageX-z,I=t.pageY-F):(Y=Math.floor(t.changedTouches[0].pageX)-z,I=Math.floor(t.changedTouches[0].pageY)-F),P.update()}function f(t){if(A){var e,s;"mousemove"===t.type?(e=t.pageX-z,s=t.pageY-F):(e=Math.floor(t.changedTouches[0].pageX)-z,s=Math.floor(t.changedTouches[0].pageY)-F),n=Math.min(n+e-Y,o.getWidth()-r),n=Math.max(n,0),i=Math.min(i+s-I,o.getHeight()-d),i=Math.max(i,0),X(n,i,B,G),Y=e,I=s,P.update()}}function _(){A=!1,P.idle()}function g(e){e.preventDefault(),l(t)}function p(){C.removeEventListener("load",p),C.contentWindow.document.addEventListener("scroll",S)}function m(){return t}function y(){return n}function L(){return i}function b(){return r}function E(){return d}function x(){return w}function k(t){N.style.zIndex=t}function W(){Z||(Z=!0,O.style.visibility="hidden",H.style.visibility="visible")}function T(){Z&&(Z=!1,H.style.visibility="hidden",O.style.visibility="visible")}function M(){N.removeEventListener("mousedown",h),N.removeEventListener("touchstart",h),q.removeEventListener("mousedown",v),q.removeEventListener("touchstart",v),q.removeEventListener("mousemove",f),q.removeEventListener("touchmove",f),q.removeEventListener("mouseup",_),q.removeEventListener("mouseleave",_),q.removeEventListener("touchend",_),q.removeEventListener("touchcancel",_),j.removeEventListener("mousedown",g),j.removeEventListener("touchstart",g),C.contentWindow.location.href="about:blank",u.removeChild(N),P.destroy()}function S(){function t(){K?(J=!1,P.idle()):(K=!0,window.setTimeout(t,100))}J||(window.setTimeout(t,100),J=!0),K=!1,B=C.contentWindow.document.body.scrollTop,G=C.contentWindow.document.body.scrollLeft,P.update()}function X(t,e,n,o){function i(){N.style.left=t+"px",N.style.top=e+"px",C.contentWindow.document.body.scrollTop=n,C.contentWindow.document.body.scrollLeft=o}window.requestAnimationFrame(i)}var Y,I,q,H,j,C,O,D=o.getFrame(),z=D.offsetLeft+u.offsetLeft,F=D.offsetTop+u.offsetTop,Z=!0,A=!1,B=0,G=0,J=!1,K=!0,N=document.createElement("div"),P=new window.thr0w.Sync(o,"thr0w_windows_"+u.id+"_"+t,c,a);N.id=t,N.style.left=n+"px",N.style.top=i+"px",N.style.width=r+"px",N.style.height=d+"px",N.classList.add("thr0w_windows_window"),N.innerHTML=['<div class="thr0w_windows_window__bar">','<div class="thr0w_windows_window__bar__controls">','<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewbox="0 0 100 100" class="thr0w_windows_window__bar__controls__control thr0w_windows_window__bar__controls__control--close">',"<g>",'<ellipse stroke="#000000" ry="49" rx="49" id="svg_1" cy="50" cx="50" stroke-width="2" fill="#ffffff"/>','<path id="svg_4" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>','<path id="svg_6" d="m13.75,30.5l18.5,18.75l-19.5,20.25l17.25,16.75l20.5,-19l19.25,19.5l17.25,-17l-19.5,-19.25l19.75,-19.75l-17.5,-17.5l-19.25,20l-19.5,-20l-17.25,17.25z" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>',"</g>","</svg>","</div>","</div>",'<iframe src="'+w+'" width="'+r+'" height="'+(d-e)+'" frameborder="0" class="thr0w_windows_window__content">',"</iframe>",'<div style="width: '+r+"px; height: "+(d-e)+'px;" class="thr0w_windows_window__cover"></div>'].join("\n"),N.addEventListener("mousedown",h),N.addEventListener("touchstart",h),q=N.querySelector(".thr0w_windows_window__bar"),q.addEventListener("mousedown",v),q.addEventListener("touchstart",v),q.addEventListener("mousemove",f),q.addEventListener("touchmove",f),q.addEventListener("mouseup",_),q.addEventListener("mouseleave",_),q.addEventListener("touchend",_),q.addEventListener("touchcancel",_),H=N.querySelector(".thr0w_windows_window__bar__controls"),H.style.visibility="visible",j=H.querySelector(".thr0w_windows_window__bar__controls__control--close"),j.addEventListener("mousedown",g),j.addEventListener("touchstart",g),C=N.querySelector(".thr0w_windows_window__content"),C.addEventListener("load",p),O=N.querySelector(".thr0w_windows_window__cover"),O.style.visibility="hidden",u.appendChild(N),this.getId=m,this.getX=y,this.getY=L,this.getWidth=b,this.getHeight=E,this.getSrc=x,this.activate=W,this.deactivate=T,this.destroy=M,this.setZ=k}if(void 0===t||"string"!=typeof t)throw 400;if(!o||"object"!=typeof o)throw 400;var h=[],u=o.getContent(),v=new window.thr0w.Sync(o,"thr0w_windows_"+u.id,i,r);this.openWindow=d,this.closeWindow=l}var e=50,n=800;if(void 0===window.thr0w)throw 400;var o={};o.WindowManager=t,window.thr0w.windows=o}();