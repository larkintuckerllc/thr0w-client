!function(){"use strict";function t(t){function n(){var t,e=[];for(t=0;t<u.length;t++){var i=u[t];e.push({id:i.getId(),x:i.getX(),y:i.getY(),width:i.getWidth(),height:i.getHeight(),src:i.getSrc()})}return e}function o(t){function e(t){return t.id}var i,n,o,r=t.map(e),d=u.map(l),s=[];for(i=0;i<u.length;i++)o=u[i],-1===r.indexOf(o.getId())&&(u.splice(i,1),o.destroy());for(i=0;i<t.length;i++)-1===d.indexOf(t[i].id)&&u.push(new h(t[i].id,t[i].x,t[i].y,t[i].width,t[i].height,t[i].src));for(i=0;i<r.length;i++)for(n=0;n<u.length;n++)if(o=u[n],o.getId()===r[i]){o.deactivate(),s.push(o),u.splice(n,1);break}u=s,c(),w()}function r(t){var e,i,n;for(e=0;e<u.length;e++)u[e].deactivate(),u[e].getId()===t&&(i=e,n=u[e]);u.splice(i,1),u.push(n),c(),w(),v.update(),v.idle()}function d(i,n,o,r,d,s){if(u.length>99)throw 400;if(-1!==u.map(l).indexOf(i))throw 400;if(void 0===i||"string"!=typeof i)throw 400;if(void 0===n||"number"!=typeof n||0>n)throw 400;if(void 0===o||"number"!=typeof o||e>o)throw 400;if(void 0===r||"number"!=typeof r||140>r)throw 400;if(void 0===d||"number"!=typeof d)throw 400;if(void 0===s||"string"!=typeof s)throw 400;if(n+r>t.getWidth())throw 400;if(o+d+e>t.getHeight())throw 400;var a;for(a=0;a<u.length;a++)u[a].deactivate();u.push(new h(i,n,o-e,r,d+e,s)),c(),w(),v.update(),v.idle()}function s(t){if(void 0===t||"string"!=typeof t)throw 400;var e=u.map(l).indexOf(t);if(-1===e)throw 400;var i=u[e];u.splice(e,1),i.destroy(),c(),w(),v.update(),v.idle(),a.fire({type:"close_window",id:t})}function l(t){return t.getId()}function c(){var t;for(t=0;t<u.length;t++)u[t].setZ(i+t)}function w(){var t=u.length-1;-1!==t&&u[t].activate()}function h(i,n,o,d,l,c){function w(){return{x:n,y:o,scrollX:Z,scrollY:A}}function h(t){n=t.x,o=t.y,Z=t.scrollX,A=t.scrollY,F.style.left=n+"px",F.style.top=o+"px",j.contentWindow.document.body.scrollTop=Z,j.contentWindow.document.body.scrollLeft=A}function a(){r(i)}function u(t){z=!0,M=t.pageX,X=t.pageY,G.update()}function v(e){if(z){var i=e.pageX,r=e.pageY;n=Math.min(n+i-M,t.getWidth()-d),n=Math.max(n,0),o=Math.min(o+r-X,t.getHeight()-l),o=Math.max(o,0),F.style.left=n+"px",F.style.top=o+"px",M=i,X=r,G.update()}}function _(){z=!1,G.idle()}function p(){s(i)}function g(){j.removeEventListener("load",g),j.contentWindow.document.addEventListener("scroll",T)}function y(){return i}function m(){return n}function b(){return o}function x(){return d}function L(){return l}function E(){return c}function k(t){F.style.zIndex=t}function W(){C||(C=!0,O.style.visibility="hidden",q.style.visibility="visible")}function S(){C&&(C=!1,q.style.visibility="hidden",O.style.visibility="visible")}function I(){F.removeEventListener("mousedown",a),Y.removeEventListener("mousedown",u),Y.removeEventListener("mousemove",v),Y.removeEventListener("mouseup",_),Y.removeEventListener("mouseleave",_),H.removeEventListener("click",p),j.contentWindow.location.href="about:blank",f.removeChild(F),G.destroy()}function T(){function t(){D?(B=!1,G.idle()):(D=!0,window.setTimeout(t,1e3))}B||(window.setTimeout(t,1e3),B=!0),D=!1,Z=j.contentWindow.document.body.scrollTop,A=j.contentWindow.document.body.scrollLeft,G.update()}var M,X,Y,q,H,j,O,C=!0,z=!1,Z=0,A=0,B=!1,D=!0,F=document.createElement("div"),G=new window.thr0w.Sync(t,"thr0w_windows_"+f.id+"_"+i,w,h);F.id=i,F.style.left=n+"px",F.style.top=o+"px",F.style.width=+d+"px",F.style.height=l+"px",F.classList.add("thr0w_windows_window"),F.innerHTML=['<div class="thr0w_windows_window__bar">','<div class="thr0w_windows_window__bar__controls">','<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewbox="0 0 100 100" class="thr0w_windows_window__bar__controls__control thr0w_windows_window__bar__controls__control--close">',"<g>",'<ellipse stroke="#cccccc" ry="49" rx="49" id="svg_1" cy="50" cx="50" stroke-width="2" fill="#ffffff"/>','<path id="svg_4" fill-opacity="0.5" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#cccccc" fill="#cccccc"/>','<path id="svg_6" d="m13.75,30.5l18.5,18.75l-19.5,20.25l17.25,16.75l20.5,-19l19.25,19.5l17.25,-17l-19.5,-19.25l19.75,-19.75l-17.5,-17.5l-19.25,20l-19.5,-20l-17.25,17.25z" fill-opacity="0.5" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#cccccc" fill="#cccccc"/>',"</g>","</svg>","</div>","</div>",'<iframe src="'+c+'" width="'+d+'" height="'+(l-e)+'" frameborder="0" class="thr0w_windows_window__content">',"</iframe>",'<div style="width: '+d+"px; height: "+(l-e)+'px;" class="thr0w_windows_window__cover"></div>'].join("\n"),F.addEventListener("mousedown",a),Y=F.querySelector(".thr0w_windows_window__bar"),Y.addEventListener("mousedown",u),Y.addEventListener("mousemove",v),Y.addEventListener("mouseup",_),Y.addEventListener("mouseleave",_),q=F.querySelector(".thr0w_windows_window__bar__controls"),q.style.visibility="visible",H=q.querySelector(".thr0w_windows_window__bar__controls__control--close"),H.addEventListener("click",p),j=F.querySelector(".thr0w_windows_window__content"),j.addEventListener("load",g),O=F.querySelector(".thr0w_windows_window__cover"),O.style.visibility="hidden",f.appendChild(F),this.getId=y,this.getX=m,this.getY=b,this.getWidth=x,this.getHeight=L,this.getSrc=E,this.activate=W,this.deactivate=S,this.destroy=I,this.setZ=k}if(!t||"object"!=typeof t)throw 400;var a=this;window.thr0w.EventTarget.call(this);var u=[],f=t.getContent(),v=new window.thr0w.Sync(t,"thr0w_windows_"+f.id,n,o);this.openWindow=d,this.closeWindow=s}var e=50,i=800;if(void 0===window.thr0w)throw 400;var n={};t.prototype=new window.thr0w.EventTarget,n.WindowManager=t,window.thr0w.windows=n}();