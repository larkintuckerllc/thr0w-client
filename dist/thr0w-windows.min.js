!function(){"use strict";function t(t,e){function n(){var t,e=[];for(t=0;t<a.length;t++){var n=a[t];e.push({id:n.getId(),x:n.getX(),y:n.getY(),width:n.getWidth(),height:n.getHeight(),src:n.getSrc()})}return e}function o(t){function e(t){return t.id}var n,o,i,r,s=t.map(e),d=a.map(w),u=[];for(n=0;n<a.length;n++)r=a[n],o=r.getId(),-1===s.indexOf(o)&&(a.splice(n,1),r.destroy(),c(o));for(n=0;n<t.length;n++)-1===d.indexOf(t[n].id)&&a.push(new h(t[n].id,t[n].x,t[n].y,t[n].width,t[n].height,t[n].src));for(n=0;n<s.length;n++)for(i=0;i<a.length;i++)if(r=a[i],r.getId()===s[n]){r.deactivate(),u.push(r),a.splice(i,1);break}a=u,l()}function i(t,n,o,i,r,s){if(a.length>99)throw 400;if(-1!==a.map(w).indexOf(t))throw 400;if(void 0===t||"string"!=typeof t)throw 400;if(void 0===n||"number"!=typeof n||0>n)throw 400;if(void 0===o||"number"!=typeof o||0>o)throw 400;if(void 0===i||"number"!=typeof i||140>i)throw 400;if(void 0===r||"number"!=typeof r||55>r)throw 400;if(void 0===s||"string"!=typeof s)throw 400;if(n+i>e.getWidth())throw 400;if(o+r>e.getHeight())throw 400;var d;for(d=0;d<a.length;d++)a[d].deactivate();a.push(new h(t,n,o,i,r,s)),l(),v.update(),v.idle()}function r(t){if(void 0===t||"string"!=typeof t)throw 400;var e=a.map(w).indexOf(t);if(-1===e)throw 400;var n=a[e];a.splice(e,1),n.destroy(),l(),v.update(),v.idle(),c(t)}function s(t,e){document.addEventListener("thr0w_windows_"+t,e)}function d(t,e){document.removeEventListener("thr0w_windows_"+t,e)}function w(t){return t.getId()}function l(){var t;for(t=0;t<a.length;t++)a[t].setZ(800+t);t=a.length-1,-1!==t&&a[t].activate()}function c(e){document.dispatchEvent(new CustomEvent("thr0w_windows_window_closed",{detail:{wmid:t,id:e}}))}function h(t,n,o,i,s,d){function w(){return{x:n,y:o,scrollX:G,scrollY:J}}function c(t){n=t.x,o=t.y,G=t.scrollX,J=t.scrollY,Y(n,o,G,J)}function h(){var e,n,o;for(e=0;e<a.length;e++)a[e].deactivate(),a[e].getId()===t&&(n=e,o=a[e]);a.splice(n,1),a.push(o),l(),v.update(),v.idle()}function f(t){D=!0,"mousedown"===t.type?(I=t.pageX-Z,q=t.pageY-A):(I=Math.floor(t.changedTouches[0].pageX)-Z,q=Math.floor(t.changedTouches[0].pageY)-A),Q.update()}function _(t){if(D){var r,d;"mousemove"===t.type?(r=t.pageX-Z,d=t.pageY-A):(r=Math.floor(t.changedTouches[0].pageX)-Z,d=Math.floor(t.changedTouches[0].pageY)-A),n=Math.min(n+r-I,e.getWidth()-i),n=Math.max(n,0),o=Math.min(o+d-q,e.getHeight()-s),o=Math.max(o,0),Y(n,o,G,J),I=r,q=d,Q.update()}}function g(){D=!1,Q.idle()}function m(){r(t)}function p(){O.removeEventListener("load",p),O.contentWindow.document.addEventListener("scroll",X)}function y(){return t}function L(){return n}function E(){return o}function b(){return i}function x(){return s}function k(){return d}function W(t){P.style.zIndex=t}function T(){B||(B=!0,z.style.visibility="hidden",j.style.visibility="visible")}function M(){B&&(B=!1,j.style.visibility="hidden",z.style.visibility="visible")}function S(){P.removeEventListener("mousedown",h),P.removeEventListener("touchstart",h),H.removeEventListener("mousedown",f),H.removeEventListener("touchstart",f),H.removeEventListener("mousemove",_),H.removeEventListener("touchmove",_),H.removeEventListener("mouseup",g),H.removeEventListener("mouseleave",g),H.removeEventListener("touchend",g),H.removeEventListener("touchcancel",g),C.removeEventListener("mousedown",m),C.removeEventListener("touchstart",m),O.contentWindow.location.href="about:blank",u.removeChild(P),Q.destroy()}function X(){function t(){N?(K=!1,Q.idle()):(N=!0,window.setTimeout(t,100))}K||(window.setTimeout(t,100),K=!0),N=!1,G=O.contentWindow.document.body.scrollTop,J=O.contentWindow.document.body.scrollLeft,Q.update()}function Y(t,e,n,o){function i(){P.style.left=t+"px",P.style.top=e+"px",O.contentWindow.document.body.scrollTop=n,O.contentWindow.document.body.scrollLeft=o}window.requestAnimationFrame(i)}var I,q,H,j,C,O,z,F=e.getFrame(),Z=F.offsetLeft+u.offsetLeft,A=F.offsetTop+u.offsetTop,B=!0,D=!1,G=0,J=0,K=!1,N=!0,P=document.createElement("div"),Q=new window.thr0w.Sync(e,"thr0w_windows_"+u.id+"_"+t,w,c);P.id=t,P.style.left=n+"px",P.style.top=o+"px",P.style.width=i+"px",P.style.height=s+"px",P.classList.add("thr0w_windows_window"),P.innerHTML=['<div class="thr0w_windows_window__bar">','<div class="thr0w_windows_window__bar__controls">','<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewbox="0 0 100 100" class="thr0w_windows_window__bar__controls__control thr0w_windows_window__bar__controls__control--close">',"<g>",'<ellipse stroke="#000000" ry="49" rx="49" id="svg_1" cy="50" cx="50" stroke-width="2" fill="#ffffff"/>','<path id="svg_4" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>','<path id="svg_6" d="m13.75,30.5l18.5,18.75l-19.5,20.25l17.25,16.75l20.5,-19l19.25,19.5l17.25,-17l-19.5,-19.25l19.75,-19.75l-17.5,-17.5l-19.25,20l-19.5,-20l-17.25,17.25z" fill-opacity="1" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="2" stroke="#808080" fill="#808080"/>',"</g>","</svg>","</div>","</div>",'<iframe src="'+d+'" width="'+(i-2)+'" height="'+(s-52)+'" frameborder="0" class="thr0w_windows_window__content">',"</iframe>",'<div style="width: '+(i-2)+"px; height: "+(s-52)+'px;" class="thr0w_windows_window__cover"></div>'].join("\n"),P.addEventListener("mousedown",h),P.addEventListener("touchstart",h),H=P.querySelector(".thr0w_windows_window__bar"),H.addEventListener("mousedown",f),H.addEventListener("touchstart",f),H.addEventListener("mousemove",_),H.addEventListener("touchmove",_),H.addEventListener("mouseup",g),H.addEventListener("mouseleave",g),H.addEventListener("touchend",g),H.addEventListener("touchcancel",g),j=P.querySelector(".thr0w_windows_window__bar__controls"),j.style.visibility="visible",C=j.querySelector(".thr0w_windows_window__bar__controls__control--close"),C.addEventListener("click",m),O=P.querySelector(".thr0w_windows_window__content"),O.addEventListener("load",p),z=P.querySelector(".thr0w_windows_window__cover"),z.style.visibility="hidden",u.appendChild(P),this.getId=y,this.getX=L,this.getY=E,this.getWidth=b,this.getHeight=x,this.getSrc=k,this.activate=T,this.deactivate=M,this.destroy=S,this.setZ=W}if(void 0===t||"string"!=typeof t)throw 400;if(!e||"object"!=typeof e)throw 400;var a=[],u=e.getContent(),v=new window.thr0w.Sync(e,"thr0w_windows_"+u.id,n,o);this.openWindow=i,this.closeWindow=r,this.addEventListener=s,this.removeEventListener=d}if(void 0===window.thr0w)throw 400;var e={};e.WindowManager=t,window.thr0w.windows=e}();