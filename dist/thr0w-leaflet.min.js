!function(){"use strict";function t(t,i,l,d,r,u){function p(){return{lat:j.lat,lng:j.lng,zoomLevel:r}}function c(t){j=o.latLng(t.lat,t.lng),r=t.zoomLevel,Y()}function h(){return{syncing:et,animationSyncing:at,nextMove:it,nextMoveDuration:A,nextMoveLat:G,nextMoveLng:J,nextMoveZ:K}}function s(t){et=t.syncing,at=t.animationSyncing,nt&&!et&&(nt=!1,wt.idle()),ot&&!at&&(ot=!1,X(),ft.idle()),ot&&t.nextMove&&g(t.nextMoveDuration,t.nextMoveLat,t.nextMoveLng,t.netMoveZ)}function g(t,i,l,d){function u(){f+=a,f>h?(window.clearInterval(lt),lt=null,j=o.latLng(i,l),Y(),ft.update(),ft.idle(),ot=!1,at=!1,_t.update(),_t.idle()):(w=g>=0?j.lng+g<=180?j.lng+g:-180:j.lng+g>=-180?j.lng+g:180,j=o.latLng(j.lat+s,w),Y(),ft.update())}var p,c,h,s,g,w;if(t!==parseInt(t))throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===d&&(d=r),"number"!=typeof d)throw 400;var f=0;if(et&&(nt&&(nt=!1,wt.idle()),et=!1,_t.update(),_t.idle()),at){if(!ot)return it=!0,A=t,G=i,J=l,K=d,_t.update(),void _t.idle();X()}ot=!0,at=!0,_t.update(),_t.idle(),b(d),ft.update(),p=Math.abs(t*(i-j.lat)/180),Math.abs(l-j.lng)<=180?(c=Math.abs(t*(l-j.lng)/180),h=Math.max(p,c),g=0!==h?(l-j.lng)/(h/a):0):j.lng>=0?(c=t*(180-j.lng+180+l)/180,h=Math.max(p,c),g=0!==h?(180-j.lng+180+l)/(h/a):0):(c=t*(180+j.lng+180-l)/180,h=Math.max(p,c),g=0!==h?-1*(180+j.lng+180-l)/(h/a):0),s=0!==h?(i-j.lat)/(h/a):0,lt=window.setInterval(u,a)}function w(){at&&(ot&&(ot=!1,X(),ft.idle()),at=!1,_t.update(),_t.idle())}function f(){b(r+1),wt.update(),wt.idle()}function _(){b(r-1),wt.update(),wt.idle()}function v(t){t.stopPropagation(),U=!0,k=(t.pageX-rt)*dt+ut,z=(t.pageY-pt)*dt+ct,wt.update(),nt=!0,et=!0,_t.update(),_t.idle()}function m(t){if(t.stopPropagation(),nt&&U){var e=(t.pageX-rt)*dt+ut,n=(t.pageY-pt)*dt+ct;E(k-e,z-n),k=e,z=n,wt.update()}}function L(t){t.stopPropagation(),nt&&U&&(U=!1,wt.idle(),nt=!1,et=!1,_t.update(),_t.idle())}function M(t){var e,n,a,o;t.stopPropagation(),e=(t.touches[0].pageX-rt)*dt+ut,B=e,n=(t.touches[0].pageY-pt)*dt+ct,D=n,t.touches.length>2&&(tt=!0),2===t.touches.length&&(a=(t.touches[1].pageX-rt)*dt+ut,o=(t.touches[1].pageY-pt)*dt+ct,H=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),F=H,R=(e+a)/2,W=(n+o)/2),1===t.touches.length&&(tt=!1,$=!1,wt.update(),nt=!0,et=!0,_t.update(),_t.idle())}function y(t){if(!$){var e,n,a,o;t.stopPropagation(),nt&&(e=(t.touches[0].pageX-rt)*dt+ut,n=(t.touches[0].pageY-pt)*dt+ct,tt||2!==t.touches.length?(E(B-e,D-n),wt.update()):(a=(t.touches[1].pageX-rt)*dt+ut,o=(t.touches[1].pageY-pt)*dt+ct,F=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),R=(e+a)/2,W=(n+o)/2),B=e,D=n)}}function x(t){t.stopPropagation(),$||nt&&(1===t.touches.length&&(tt||($=!0,j=V.containerPointToLatLng(o.point(R,W)),b(F>H?r+1:r-1),wt.update(),wt.idle(),nt=!1,et=!1,_t.update(),_t.idle())),0===t.touches.length&&(wt.idle(),nt=!1,et=!1,_t.update(),_t.idle()))}function E(t,a){var i=j.lat;i>e&&0>a||n>i&&a>0||(j=V.containerPointToLatLng(o.point(ht+t,st+a)),Y())}function b(t){t=O>=t?t:O,t=t>=N?t:N,r=t,Y()}function X(){lt&&(window.clearInterval(lt),lt=null)}function Y(){V.setView(j,r,{animate:!1}),q.setView(V.containerPointToLatLng(o.point(T,C)),r,{animate:!1})}if(!t||"object"!=typeof t)throw 400;if(!i||"string"!=typeof i)throw 400;var P=t.getContent(),S=t.getVisibleBounds(),T=(S[0]+S[2])/2,C=(S[1]+S[3])/2,I=document.getElementById(i);I.style.left=S[0]+"px",I.style.top=S[1]+"px",I.style.width=S[2]-S[0]+"px",I.style.height=S[3]-S[1]+"px";var q=o.map(i,u),Z=document.createElement("div");Z.id="thr0w_leaflet_"+I.id,Z.style.width="100%",Z.style.height="100%",Z.style.visibility="hidden",P.appendChild(Z);var V=o.map("thr0w_leaflet_"+I.id),j=o.latLng(l,d);Y();var k,z,B,D,H,F,R,W,A,G,J,K,N=q.getMinZoom(),O=q.getMaxZoom(),Q=t.getFrame(),U=!1,$=!1,tt=!1,et=!1,nt=!1,at=!1,ot=!1,it=!1,lt=null,dt=t.getRowScale(),rt=Q.offsetLeft,ut=t.frameXYToContentXY([0,0])[0],pt=Q.offsetTop,ct=t.frameXYToContentXY([0,0])[1],ht=t.getWidth()/2,st=t.getHeight()/2,gt=document.createElement("div"),wt=new window.thr0w.Sync(t,"thr0w_leaflet_"+P.id,p,c),ft=new window.thr0w.Sync(t,"thr0w_leaflet_animation_"+P.id,p,c,!0),_t=new window.thr0w.Sync(t,"thr0w_leaflet_oob_"+P.id,h,s);this.moveTo=g,this.moveStop=w,this.leafletMap=q,gt.classList.add("thr0w_leaflet_palette"),gt.innerHTML=['<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--plus">+</div>',"</div>",'<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--minus">-</div>',"</div>"].join("\n"),P.appendChild(gt),gt.querySelector(".thr0w_leaflet_palette__row__cell--plus").addEventListener("click",f),gt.querySelector(".thr0w_leaflet_palette__row__cell--minus").addEventListener("click",_),P.addEventListener("mousedown",v,!0),P.addEventListener("mousemove",m,!0),P.addEventListener("mouseup",L,!0),P.addEventListener("touchstart",M,!0),P.addEventListener("touchmove",y,!0),P.addEventListener("touchend",x,!0),P.addEventListener("touchcancel",x,!0)}if(void 0===window.thr0w)throw 400;var e=80,n=-80,a=33,o=window.L,i={};window.thr0w.leaflet=i,i.Map=t}();