!function(){"use strict";function t(t,i,l,d,r){function p(){return{lat:G.lat,lng:G.lng,zoomLevel:d}}function c(t){G=o.latLng(t.lat,t.lng),d=t.zoomLevel,E()}function h(){return{syncing:st,animationSyncing:ft,nextMove:gt,nextMoveDuration:W,nextMoveLat:k,nextMoveLng:z,nextMoveZ:D}}function u(t){st=t.syncing,ft=t.animationSyncing,_t&&!st&&(_t=!1,R.idle()),wt&&!ft&&(wt=!1,Y(),A.idle()),wt&&t.nextMove&&s(t.nextMoveDuration,t.nextMoveLat,t.nextMoveLng,t.netMoveZ)}function s(t,i,l,r){function p(){w+=a,w>u?(window.clearInterval(vt),vt=null,G=o.latLng(i,l),E(),A.update(),A.idle(),wt=!1,ft=!1,B.update(),B.idle()):(f=_>=0?G.lng+_<=180?G.lng+_:-180:G.lng+_>=-180?G.lng+_:180,G=o.latLng(G.lat+s,f),E(),A.update())}if(t!==parseInt(t))throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===r&&(r=d),"number"!=typeof r)throw 400;var c,h,u,s,_,f,w=0;if(st&&(_t&&(_t=!1,R.idle()),st=!1,B.update(),B.idle()),ft){if(!wt)return gt=!0,W=t,k=i,z=l,D=r,B.update(),void B.idle();Y()}wt=!0,ft=!0,B.update(),B.idle(),X(r),A.update(),c=Math.abs(t*(i-G.lat)/180),Math.abs(l-G.lng)<=180?(h=Math.abs(t*(l-G.lng)/180),u=Math.max(c,h),_=0!==u?(l-G.lng)/(u/a):0):G.lng>=0?(h=t*(180-G.lng+180+l)/180,u=Math.max(c,h),_=0!==u?(180-G.lng+180+l)/(u/a):0):(h=t*(180+G.lng+180-l)/180,u=Math.max(c,h),_=0!==u?-1*(180+G.lng+180-l)/(u/a):0),s=0!==u?(i-G.lat)/(u/a):0,vt=window.setInterval(p,a)}function _(){ft&&(wt&&(wt=!1,Y(),A.idle()),ft=!1,B.update(),B.idle())}function f(){X(d+1),R.update(),R.idle()}function w(){X(d-1),R.update(),R.idle()}function g(t){t.stopPropagation(),ct=!0,C=(t.pageX-O)*N+tt,P=(t.pageY-Q)*N+et,R.update(),_t=!0,st=!0,B.update(),B.idle()}function v(t){if(t.stopPropagation(),_t&&ct){var e=(t.pageX-O)*N+tt,n=(t.pageY-Q)*N+et;x(C-e,P-n),C=e,P=n,R.update()}}function m(t){t.stopPropagation(),_t&&ct&&(ct=!1,R.idle(),_t=!1,st=!1,B.update(),B.idle())}function L(t){var e,n,a,o;t.stopPropagation(),e=(t.touches[0].pageX-O)*N+tt,S=e,n=(t.touches[0].pageY-Q)*N+et,q=n,t.touches.length>2&&(ut=!0),2===t.touches.length&&(a=(t.touches[1].pageX-O)*N+tt,o=(t.touches[1].pageY-Q)*N+et,H=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),I=H,Z=(e+a)/2,j=(n+o)/2),1===t.touches.length&&(ut=!1,ht=!1,R.update(),_t=!0,st=!0,B.update(),B.idle())}function M(t){if(!ht){var e,n,a,o;t.stopPropagation(),_t&&(e=(t.touches[0].pageX-O)*N+tt,n=(t.touches[0].pageY-Q)*N+et,ut||2!==t.touches.length?(x(S-e,q-n),R.update()):(a=(t.touches[1].pageX-O)*N+tt,o=(t.touches[1].pageY-Q)*N+et,I=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),Z=(e+a)/2,j=(n+o)/2),S=e,q=n)}}function y(t){t.stopPropagation(),ht||_t&&(1===t.touches.length&&(ut||(ht=!0,G=T.containerPointToLatLng(o.point(Z,j)),X(I>H?d+1:d-1),R.update(),R.idle(),_t=!1,st=!1,B.update(),B.idle())),0===t.touches.length&&(R.idle(),_t=!1,st=!1,B.update(),B.idle()))}function x(t,a){var i=G.lat;i>e&&0>a||n>i&&a>0||(G=T.containerPointToLatLng(o.point(U+t,$+a)),E())}function X(t){t=F>=t?t:F,t=t>=V?t:V,d=t,E()}function Y(){vt&&(window.clearInterval(vt),vt=null)}function E(){T.setView(G,d,{animate:!1}),b.setView(T.containerPointToLatLng(o.point(ot,it)),d,{animate:!1})}if(!t||"object"!=typeof t)throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===d||"number"!=typeof d)throw 400;if(!r||"object"!=typeof r)throw 400;var b,T,C,P,S,q,H,I,Z,j,W,k,z,D,V,F,R,A,B,G=o.latLng(i,l),J=t.getFrame(),K=t.getContent(),N=t.getRowScale(),O=J.offsetLeft,Q=J.offsetTop,U=t.getWidth()/2,$=t.getHeight()/2,tt=t.frameXYToContentXY([0,0])[0],et=t.frameXYToContentXY([0,0])[1],nt=t.frameXYToContentXY([J.clientWidth/N,J.clientHeight/N])[0],at=t.frameXYToContentXY([J.clientWidth/N,J.clientHeight/N])[1],ot=(tt+nt)/2,it=(et+at)/2,lt=document.createElement("div"),dt=document.createElement("div"),rt=document.createElement("div"),pt=document.createElement("div"),ct=!1,ht=!1,ut=!1,st=!1,_t=!1,ft=!1,wt=!1,gt=!1,vt=null;lt.classList.add("thr0w_leaflet_container"),K.appendChild(lt),dt.id="thr0w_leaflet_"+K.id,dt.classList.add("thr0w_leaflet_container__map"),dt.style.left=tt+"px",dt.style.top=et+"px",dt.style.width=nt-tt+"px",dt.style.height=at-et+"px",lt.appendChild(dt),b=o.map("thr0w_leaflet_"+K.id,r),rt.id="thr0w_leaflet_positioning_"+K.id,rt.classList.add("thr0w_leaflet_container__map"),rt.classList.add("thr0w_leaflet_container__map--positioning"),lt.appendChild(rt),T=o.map("thr0w_leaflet_positioning_"+K.id),pt.classList.add("thr0w_leaflet_palette"),pt.innerHTML=['<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--plus">+</div>',"</div>",'<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--minus">-</div>',"</div>"].join("\n"),K.appendChild(pt),E(),V=b.getMinZoom(),F=b.getMaxZoom(),R=new window.thr0w.Sync(t,"thr0w_leaflet_"+K.id,p,c),A=new window.thr0w.Sync(t,"thr0w_leaflet_animation_"+K.id,p,c,!0),B=new window.thr0w.Sync(t,"thr0w_leaflet_oob_"+K.id,h,u),lt.addEventListener("mousedown",g,!0),lt.addEventListener("mousemove",v,!0),lt.addEventListener("mouseup",m,!0),lt.addEventListener("touchstart",L,!0),lt.addEventListener("touchmove",M,!0),lt.addEventListener("touchend",y,!0),lt.addEventListener("touchcancel",y,!0),pt.querySelector(".thr0w_leaflet_palette__row__cell--plus").addEventListener("click",f),pt.querySelector(".thr0w_leaflet_palette__row__cell--minus").addEventListener("click",w),this.moveTo=s,this.moveStop=_,this.leafletMap=b}if(void 0===window.thr0w)throw 400;var e=80,n=-80,a=33,o=window.L,i={};window.thr0w.leaflet=i,i.Map=t}();