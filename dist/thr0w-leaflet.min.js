!function(){"use strict";function t(t,i,l,d,r){function p(){return{lat:j.lat,lng:j.lng,zoomLevel:d}}function u(t){j=o.latLng(t.lat,t.lng),d=t.zoomLevel,X()}function s(){return{syncing:et,animationSyncing:at,nextMove:it,nextMoveDuration:A,nextMoveLat:G,nextMoveLng:J,nextMoveZ:K}}function c(t){et=t.syncing,at=t.animationSyncing,nt&&!et&&(nt=!1,_t.idle()),ot&&!at&&(ot=!1,b(),gt.idle()),ot&&t.nextMove&&h(t.nextMoveDuration,t.nextMoveLat,t.nextMoveLng,t.netMoveZ)}function h(t,i,l,r){function p(){g+=a,g>c?(window.clearInterval(lt),lt=null,j=o.latLng(i,l),X(),gt.update(),gt.idle(),ot=!1,at=!1,ft.update(),ft.idle()):(_=w>=0?j.lng+w<=180?j.lng+w:-180:j.lng+w>=-180?j.lng+w:180,j=o.latLng(j.lat+h,_),X(),gt.update())}var u,s,c,h,w,_;if(t!==parseInt(t))throw 400;if(void 0===i||"number"!=typeof i||i>e||n>i)throw 400;if(void 0===l||"number"!=typeof l)throw 400;if(void 0===r&&(r=d),"number"!=typeof r)throw 400;var g=0;if(et&&(nt&&(nt=!1,_t.idle()),et=!1,ft.update(),ft.idle()),at){if(!ot)return it=!0,A=t,G=i,J=l,K=r,ft.update(),void ft.idle();b()}ot=!0,at=!0,ft.update(),ft.idle(),E(r),gt.update(),u=Math.abs(t*(i-j.lat)/180),Math.abs(l-j.lng)<=180?(s=Math.abs(t*(l-j.lng)/180),c=Math.max(u,s),w=0!==c?(l-j.lng)/(c/a):0):j.lng>=0?(s=t*(180-j.lng+180+l)/180,c=Math.max(u,s),w=0!==c?(180-j.lng+180+l)/(c/a):0):(s=t*(180+j.lng+180-l)/180,c=Math.max(u,s),w=0!==c?-1*(180+j.lng+180-l)/(c/a):0),h=0!==c?(i-j.lat)/(c/a):0,lt=window.setInterval(p,a)}function w(){at&&(ot&&(ot=!1,b(),gt.idle()),at=!1,ft.update(),ft.idle())}function _(){E(d+1),_t.update(),_t.idle()}function g(){E(d-1),_t.update(),_t.idle()}function f(t){t.stopPropagation(),U=!0,k=(t.pageX-rt)*dt+pt,z=(t.pageY-ut)*dt+st,_t.update(),nt=!0,et=!0,ft.update(),ft.idle()}function v(t){if(t.stopPropagation(),nt&&U){var e=(t.pageX-rt)*dt+pt,n=(t.pageY-ut)*dt+st;x(k-e,z-n),k=e,z=n,_t.update()}}function m(t){t.stopPropagation(),nt&&U&&(U=!1,_t.idle(),nt=!1,et=!1,ft.update(),ft.idle())}function L(t){var e,n,a,o;t.stopPropagation(),e=(t.touches[0].pageX-rt)*dt+pt,D=e,n=(t.touches[0].pageY-ut)*dt+st,H=n,t.touches.length>2&&(tt=!0),2===t.touches.length&&(a=(t.touches[1].pageX-rt)*dt+pt,o=(t.touches[1].pageY-ut)*dt+st,B=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),F=B,R=(e+a)/2,W=(n+o)/2),1===t.touches.length&&(tt=!1,$=!1,_t.update(),nt=!0,et=!0,ft.update(),ft.idle())}function M(t){if(!$){var e,n,a,o;t.stopPropagation(),nt&&(e=(t.touches[0].pageX-rt)*dt+pt,n=(t.touches[0].pageY-ut)*dt+st,tt||2!==t.touches.length?(x(D-e,H-n),_t.update()):(a=(t.touches[1].pageX-rt)*dt+pt,o=(t.touches[1].pageY-ut)*dt+st,F=Math.floor(Math.sqrt(Math.pow(e-a,2)+Math.pow(n-o,2))),R=(e+a)/2,W=(n+o)/2),D=e,H=n)}}function y(t){t.stopPropagation(),$||nt&&(1===t.touches.length&&(tt||($=!0,j=V.containerPointToLatLng(o.point(R,W)),E(F>B?d+1:d-1),_t.update(),_t.idle(),nt=!1,et=!1,ft.update(),ft.idle())),0===t.touches.length&&(_t.idle(),nt=!1,et=!1,ft.update(),ft.idle()))}function x(t,a){var i=j.lat;i>e&&0>a||n>i&&a>0||(j=V.containerPointToLatLng(o.point(ct+t,ht+a)),X())}function E(t){t=O>=t?t:O,t=t>=N?t:N,d=t,X()}function b(){lt&&(window.clearInterval(lt),lt=null)}function X(){V.setView(j,d,{animate:!1}),I.setView(V.containerPointToLatLng(o.point(T,C)),d,{animate:!1})}if(!t||"object"!=typeof t)throw 400;var Y=t.getContent(),P=document.createElement("div");P.classList.add("thr0w_leaflet_container"),Y.appendChild(P);var S=t.getVisibleBounds(),T=(S[0]+S[2])/2,C=(S[1]+S[3])/2,q=document.createElement("div");q.id="thr0w_leaflet_"+Y.id,q.style.position="absolute",q.style.left=S[0]+"px",q.style.top=S[1]+"px",q.style.width=S[2]-S[0]+"px",q.style.height=S[3]-S[1]+"px",P.appendChild(q);var I=o.map("thr0w_leaflet_"+Y.id,r),Z=document.createElement("div");Z.id="thr0w_leaflet_positioning_"+q.id,Z.style.width="100%",Z.style.height="100%",Z.style.visibility="hidden",P.appendChild(Z);var V=o.map("thr0w_leaflet_positioning_"+q.id),j=o.latLng(i,l);X();var k,z,D,H,B,F,R,W,A,G,J,K,N=I.getMinZoom(),O=I.getMaxZoom(),Q=t.getFrame(),U=!1,$=!1,tt=!1,et=!1,nt=!1,at=!1,ot=!1,it=!1,lt=null,dt=t.getRowScale(),rt=Q.offsetLeft,pt=t.frameXYToContentXY([0,0])[0],ut=Q.offsetTop,st=t.frameXYToContentXY([0,0])[1],ct=t.getWidth()/2,ht=t.getHeight()/2,wt=document.createElement("div"),_t=new window.thr0w.Sync(t,"thr0w_leaflet_"+Y.id,p,u),gt=new window.thr0w.Sync(t,"thr0w_leaflet_animation_"+Y.id,p,u,!0),ft=new window.thr0w.Sync(t,"thr0w_leaflet_oob_"+Y.id,s,c);this.moveTo=h,this.moveStop=w,this.leafletMap=I,wt.classList.add("thr0w_leaflet_palette"),wt.innerHTML=['<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--plus">+</div>',"</div>",'<div class="thr0w_leaflet_palette__row">','<div class="thr0w_leaflet_palette__row__cell thr0w_leaflet_palette__row__cell--minus">-</div>',"</div>"].join("\n"),Y.appendChild(wt),wt.querySelector(".thr0w_leaflet_palette__row__cell--plus").addEventListener("click",_),wt.querySelector(".thr0w_leaflet_palette__row__cell--minus").addEventListener("click",g),P.addEventListener("mousedown",f,!0),P.addEventListener("mousemove",v,!0),P.addEventListener("mouseup",m,!0),P.addEventListener("touchstart",L,!0),P.addEventListener("touchmove",M,!0),P.addEventListener("touchend",y,!0),P.addEventListener("touchcancel",y,!0)}if(void 0===window.thr0w)throw 400;var e=80,n=-80,a=33,o=window.L,i={};window.thr0w.leaflet=i,i.Map=t}();